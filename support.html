<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>支持与捐赠 - TranslationPlugin</title>
    <link rel="icon" href="favicon.ico">
    <meta name="description" content="IntelliJ based IDEs/Android Studio 翻译插件，支持多语言互译、文档翻译、语音朗读...">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css?v1.0" media="screen">
    <script src="//cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
<header class="frame_head">
    <a href="index.html" class="primary">TranslationPlugin</a>
    <a href="start.html">开始使用</a>
    <a href="updates.html">更新</a>
    <a href="support.html" class="selected">支持与捐赠</a>
    <a class="github-icon-wrap" href="https://github.com/YiiGuxing/TranslationPlugin" target="_blank">
        <img class="github-icon" src="images/github.svg" alt="GitHub"></a>
</header>
<div class="frame_wrapper">
    <div class="frame_content support">
        <div class="column">
            <h3 class="column_item_title" style="margin-top: 2rem;">您可以通过执行以下任意操作来贡献和支持此项目：</h3>
            <ul class="column_tip">
                <li><a href="https://github.com/YiiGuxing/TranslationPlugin" target="_blank">在GitHub上标星</a></li>
                <li>
                    <a href="https://github.com/YiiGuxing/TranslationPlugin/issues/new/choose" target="_blank">反馈问题</a>
                </li>
                <li>
                    <a href="https://github.com/YiiGuxing/TranslationPlugin/issues/new/choose"
                       target="_blank">提出您的想法/建议</a>
                </li>
                <li><a href="https://github.com/YiiGuxing/TranslationPlugin" target="_blank">提交PR</a></li>
                <li>将插件分享给您的朋友/同事</li>
                <li>
                    如果您喜欢这个插件，请考虑捐赠以维持插件的相关活动:
                    <table style="margin-top: 1rem;">
                        <thead>
                        <tr>
                            <th>Open Collective</th>
                            <th>支付宝</th>
                            <th>微信支付</th>
                        </tr>
                        </thead>
                        <tr>
                            <td>
                                <a href="https://opencollective.com/translation-plugin" target="_blank">
                                    <img src="./images/open-collective.svg" width="171px" alt>
                                </a>
                            </td>
                            <td><img src="./images/alipay.png" width="240px" alt></td>
                            <td><img src="./images/wechat.png" width="240px" alt></td>
                        </tr>
                    </table>
                    <div class="support-patrons-note"><b>注：</b>使用支付宝/微信支付捐赠后请留言或者通过邮件提供您的名字/昵称和网站，格式为：<br/><span
                            class="support-patrons">名字/昵称 [&lt;网站>][：留言]</span>（网站与留言为可选部分，例子：<span
                            class="support-patrons">Yii.Guxing &lt;github.com/YiiGuxing>：加油！</span>）<br/>
                        通过邮件发送时，请还提供以下信息：<br/>
                        <div class="support-patrons" style="max-width: 450px">
                            捐赠金额：<br/>
                            支付平台：支付宝/微信支付<br/>
                            支付宝用户名/微信用户名/单号（后5位）：
                        </div>
                        邮箱地址：<a href="mailto:yii.guxing@gmail.com?subject=Donate&body=%E5%90%8D%E5%AD%97%2F%E6%98%B5%E7%A7%B0%3C%E7%BD%91%E7%AB%99%3E%EF%BC%9A%E6%82%A8%E7%9A%84%E7%95%99%E8%A8%80%0A%0A%E6%8D%90%E8%B5%A0%E9%87%91%E9%A2%9D%EF%BC%9A%0A%E6%94%AF%E4%BB%98%E5%B9%B3%E5%8F%B0%EF%BC%9A%E6%94%AF%E4%BB%98%E5%AE%9D%2F%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%0A%E6%94%AF%E4%BB%98%E5%AE%9D%E7%94%A8%E6%88%B7%E5%90%8D%2F%E5%BE%AE%E4%BF%A1%E7%94%A8%E6%88%B7%E5%90%8D%2F%E5%8D%95%E5%8F%B7%EF%BC%88%E5%90%8E5%E4%BD%8D%EF%BC%89%EF%BC%9A%0A%0A">yii.guxing@gmail.com</a>
                        (点击发送邮件)<br/>
                        您提供的名字、网站和捐赠总额将会被添加到<a href="#patrons"><b>捐赠者</b></a>列表中。
                    </div>
                </li>
            </ul>
            <h3 class="column_item_title">感谢您的支持！</h3>
        </div>
        <div id="patrons" class="column">
            <div class="title">捐赠者</div>
            <table>
                <tbody id="patronsTableBody">
                <tr>
                    <th class="donator">姓名</th>
                    <th class="website">网站</th>
                    <th class="amount">捐赠总额</th>
                </tr>
                </tbody>
            </table>
            <div id="placeholder" class="patrons-placeholder">加载中…</div>
        </div>
    </div>
</div>
<script>
    function processPatronsList(patronsList) {
        var regx = /^\|\s*(.+?)\s*\|\s*(\[\s*(.+?)\s*]\(\s*(.+?)\s*\))?\s*\|\s*(.+?)\s*\|$/;
        for (var i = 0; i < patronsList.length; i++) {
            var patronsLine = patronsList[i];
            if (patronsLine) {
                var parsedPatron = regx.exec(patronsLine);
                var name = parsedPatron[1];
                var websiteName = parsedPatron[3];
                var websiteUrl = parsedPatron[4];
                var website = null;
                if (websiteName && websiteUrl) {
                    website = {name: websiteName, url: websiteUrl};
                }
                var amount = parsedPatron[5];
                if (name && amount) {
                    appendPatron(name, website, amount);
                }
            }
        }
    }

    var $patronsTableBody = $("#patronsTableBody");

    function appendPatron(name, website, amount) {
        var nameTd = "<td>" + name + "</td>";
        var websiteTd = "<td>" + (website ? "<a href='" + website.url + "' target='_blank'>" + website.name + "</a>" : "") + "</td>";
        var amountTd = "<td>" + amount + "</td>";
        $patronsTableBody.append($("<tr>" + nameTd + websiteTd + amountTd + "</tr>"))
    }

    var date = new Date()
    var t = "" + date.getFullYear() + (date.getMonth() + 1) + date.getDate()
    $.ajax({
        url: "https://cdn.jsdelivr.net/gh/YiiGuxing/TranslationPlugin@master/FINANCIAL_CONTRIBUTORS.md?t=" + t,
        type: "GET",
        dataType: "TEXT",
        success: function (data) {
            processPatronsList(data.split(/\s*\n+\s*/).slice(3));
            $("#placeholder").hide();
        },
        error: function () {
            $("#placeholder").text("加载失败！")
        }
    });
</script>
</body>
</html>
